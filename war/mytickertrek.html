
   
  
   <div id="my-t2" style="float:left;">  
       <div  style="float:left;padding:0px; width:250px; height:250px;margin-top:0px; float:left;clear:left;">
   <div id="mi-sm" >    
     <!--  <h3><a href="#">Credentials</a></h3>
            <div id="mi-cr">
                <div id="p-username" style="float:left;font-size: 1.5em;color:blue;"></div>
                <form name="user-rating" style="float:right">
                    <input name="adv1" type="radio" class="star"  disabled="disabled" value="1"/>
                    <input name="adv1" type="radio" class="star"  disabled="disabled" value="2"/>
                    <input name="adv1" type="radio" class="star"  disabled="disabled" value="3"/>
                    <input name="adv1" type="radio" class="star"   disabled="disabled" value="4"/>
                    <input name="adv1" type="radio" class="star"  disabled="disabled" value="5"/>

                </form>
                    <div style="float:left;clear:left;font-weight:bold;">Competition Won</div><div id="win"style="padding-left:10px;float:left"></div>
                    <div style="clear:left;float:left;font-weight:bold;">Site Score:</div><div id="site-score"style="padding-left:10px;float:left"></div>
                    <div style="clear:left;float:left;font-weight:bold;">Following:</div><div id="following"style="padding-left:10px;float:left"></div>
                    <div style="clear:left;float:left;font-weight:bold;">Followers:</div><div id="follower"style="padding-left:10px;float:left"></div>
            </div>-->
            <h3><a href="#">My Strategy</a></h3>
            <div id="mi-ms">

            </div>
            <h3><a href="#">Strategy I Follow</a></h3>
            <div id="mi-if">

            </div>
            <h3><a href="#">Contest</a></h3>
            <div id="mi-mychamp">

            </div>
            
            <h3><a href="#">Bookmark</a></h3>
            <div id="mi-wl">

            </div>
           

    </div>
  </div> 
     <div id="t2-contest" class="module" style="width:660px;padding:0px;float:right;margin-left:10px;display:none;"> 
        <div class="header-lightblue" style="font-size:15px !important;width:650px;float:left;">
            <div id="t2-cname" style="float:left"></div> 
            <div style="float:right;width:150px;margin-left: 50px;"><div style="float:left;width:40px;margin-right: 10px;">Prize:</div> <div id ="t2-prize" style="float:right;width:100px;text-align: right;"></div></div>
            <div style="float:right;width:225px;"><div id="t2StartTitle"style="float:left;width:75px;"></div> <div id ="t2-timer" style="float:right;width:150px;text-align: right;"></div></div>
            
        </div>
            
                    
                    <div  style="float:left;"><div style="padding:3px;"><img height="50" style="float: left; padding-right: 0px" src="images/trophy.jpg">
                    <div style="float:right;">
                            <div id="t2-join" class="btn-blue" style="font-size:10px !important; margin:5px;float:right;display:none;" onClick="">Join Now!</div>
                            <div id="t2-cdescription"style="color: #2E6E9E;font-size: 14px;padding:10px 0px;display:none;width:500px;float:left;"></div>
                    </div>
                    <div id="t2-contest-participated" style="float:right;display:none;">
                        <div class="" style="float:left;font-size: 12px!important;margin: 5px;"> <div style="float:left;width:75px;font-size: 15px;">Ranking:</div> <div id ="t2-rank" style="float:right;width:65px;text-align: right;font-size: 15px;font-weight: bold;"></div></div>   
                        <div class="" style="float:left;font-size: 12px!important;margin: 5px;"> <div style="float:left;width:90px;font-size: 15px;margin-left: 20px;">Current Gain:</div> <div id ="t2-gain" style="float:right;width:50px;text-align: right;font-size: 15px;font-weight: bold;"></div></div>  
                        <div id="t2-contest-placeorder" class="btn-blue" style="font-size:10px !important; margin:5px 10px;float:right;" onClick="">Place Order</div>
                        <div id="t2-contest-page" class="btn-blue" style="font-size:10px !important; margin:5px 10px;float:right;" onClick="">See Ranking Ladder</div>
                        <div style="font-size: 10px;clear:both;">*Ranking will be calculated by the end of the day</div>
                    </div>
                    <div id="t2-contest-thanks" style="color: #2E6E9E;font-size: 14px;clear:right;padding:10px 0px;display:none;width:600px;"> Thanks you for signing up. We will send you a notification when it starts. 
                        Until then practice your skills by creating a strategy and following others.</div>
            </div>
        </div>
        
    </div>
       
       <div  class="ui-widget-content ui-corner-all" style="margin-left: 10px;margin-top: 10px;float:right;padding: 0px;border:0px solid #13518E;">
         
           <div class="header-blue" style="width: 660px;"><span style="font-size: 20px;">Recent Order Feed</span><span id="t2-orderfeed-msg"style="font-size: 12px;margn-left:10px;"></span></div>
                <table id="mi-rs" style="display:none"></table>
            
             
      </div>
 <!--<div style="float:left;width:250px;clear:left;" >
         
         <div class="header-blue" style="float:left;font-size: 15px!important;margin-top: 5px;"> <div style="float:left;width:140px;">Total Earnings:</div> <div id="total-earning" style="float:right;width:100px;text-align: right;"></div></div>
         <div class="header-green" style="float:left;font-size: 15px!important;margin-top: 5px;"> <span style="float:left;width:140px;">Prize:</span> <div id="prize-earning" style="float:right;width:100px;text-align: right;"></div></div>
         <div class="header-green" style="float:left;font-size: 15px!important;margin-top: 5px;"> <span style="float:left;width:140px;">Subscription:</span> <div id="subscription-earning" style="float:right;width:100px;text-align: right;"></div></div>
         <div class="header-lightblue" style="float:left;font-size: 15px!important;margin-top: 5px;"> <div style="float:left;width:140px;">Contest Won:</div> <div id="win" style="float:right;width:100px;text-align: right;"></div></div>
         <div class="header-lightblue" style="float:left;font-size: 15px!important;margin-top: 5px;"> <div style="float:left;width:140px;">Following:</div> <div id="following" style="float:right;width:100px;text-align: right;"></div></div>
         <div class="header-lightblue" style="float:left;font-size: 15px!important;margin-top: 5px;"> <div style="float:left;width:140px;">Followers:</div> <div id="follower" style="float:right;width:100px;text-align: right;"></div></div>
                
     </div>  -->
      
       </div>
<script type="text/javaScript">
     
     
     function  showComment(comment){
      //var td = document.getElementById('mi-rs').rows['row'+id].cells;
      //var comment = $(td[12]).text();
      $( "#dlgmessage").html(comment);
      $( "#messge-dialog" ).dialog( "open" );
    }
    var count = 0;
    jQuery('#my-t2').ready(function() {
    
       
    

        //loadChampList();
        //setTimeout(showT2ChampBlock(), 1000);
        
        /*
        function showT2ChampBlock(){ 
            //bfTrace("showT2ChampBlock"+count );
           // if(clist == null ){if(count < 15){count++;setTimeout(showT2ChampBlock(), 1000);return;}else return; }
            if(clist == null) return;
            var currcontest = null;
            if(clist != null)
                for(key in clist)
                  if(Constants.Championship.ACTIVE==clist[key].status)
                      {currcontest = clist[key]; break;}
                      
            if(currcontest == null) return;
            $('#t2-contest').show();
            if(currcontest!=null){
                $('#t2-prize').html(currcontest.prize+ ' '+Constants.Currency.CURRENCY_CODE[currcontest.currency]);
                $('#t2-cname').html(currcontest.name);

                var start = new Date(parseDate(currcontest.startdate));
                var end = new Date(parseDate(currcontest.enddate));
                //bfTrace("Start "+start.getTime() + "date:" +start);
                //bfTrace("current "+new Date().getTime() + " date:"+new Date());
                setInterval(function() {
                    var s = Math.floor((start - new Date() ) / 1000);
                    if(s < 0){ s = Math.floor((end - new Date() ) / 1000);$('#t2StartTitle').html('Ends in:');}
                    else if(s < 0){$('#t2StartTitle').html('Ended'); return;}
                    else $('#t2StartTitle').html('Starts in:');
                    var d = Math.floor(s/86400); s = s%86400;
                    var h = Math.floor(s/3600); s = s%3600;
                    var m = Math.floor(s/60); s = Math.floor(s%60);
                    var str = "";
                    if(d > 0) str = d+" days ";
                    str += (h+":"+m+":"+s);

                    $('#t2-timer').html( str);
                }, 1000);
            }
        
       
            var sid = doesCSignedup(currcontest.name);
            if(sid == 0){
                     $('#t2-join').show();
                    $('#t2-cdescription').show().html(currcontest.description);
                   
                    $('#t2-join').attr('onCLick',"setHref('/#!/contest/"+currcontest.championshipid+"');");

                }else if(sid != 0 && new Date().getTime() >= start.getTime()){

                    $('#t2-contest-participated').show();

                    $.ajax({
                            type: "post",
                            url: "publicdatahandle",
                            dataType: "json",
                            data:'action='+Constants.Championship.CHAMP_INFO+'&strategyid='+sid,
                            error:function(){
                                  alert("error occured!!!");
                            },
                            success:  function(data) {
                                if(data.status == 'success'){
                                    var champ = data.champ;
                                    var t=data.champinfo.position+"*";
                                    if(data.champinfo.position == 0)t = 'Undefined*';

                                $('#t2-rank').html(t);
                                $('#t2-gain').html(colorFormat(data.champinfo['overallreturn']));
                                $('#t2-contest-placeorder').attr('onCLick',"setHref('/#!/strategy/"+sid+"');");
                                $('#t2-contest-page').attr('onCLick',"setHref('/#!/contest/"+currcontest.championshipid+"');");
                               // $('#champ-block').append(');




                                            }
                                        }
                                });

                }else{
                    $('#t2-contest-thanks').show();
                }
        
          }  */
           //showT2ChampBlock();
       /* if(profile!=null){
        var e = new Number(profile.prizeearning);   
        var p = new Number(profile.subscriptionearning);
        $('#total-earning').text(new Number(e.valueOf()+p.valueOf()).toFixed(2));
        $('#prize-earning').text(e.toFixed(2));
        $('#subscription-earning').text(p.toFixed(2));
         $('#win').text(profile.championship);
       // $('#site-score').text(profile.championship);
        $('#following').text(profile.following);
        $('#follower').text(profile.followers);
    }*/
        
        
        $( "#mi-sm" ).accordion({
                        //active: 0,
                        //alwaysOpen: true,
                        //event: "mouseover",
			fillSpace: true,
                        collapsible: true,
                        autoHeight: false,
                        navigation: true
                        //collapsible: true
		});
   
    if(strategylist!=null)
                      for(key in strategylist)
                      {
                          var ref = '/#!/strategy/'+strategylist[key].strategyid;
                          if(strategylist[key].relation == Constants.Strategy.OWNER){
                              if( Constants.Strategy.TYPE_GENERAL != strategylist[key].type){
                                $('#mi-mychamp').append('<li><a href='+ref+' class="menulink">'+strategylist[key].strategyname+'</a></li>');
                                initLoad = strategylist[key].strategyid;
                              }
                              else
                                  $('#mi-ms').append('<li><a href='+ref+' class="menulink">'+strategylist[key].strategyname+'</a></li>');
                          }
                          else if(strategylist[key].relation == 1)
                                $('#mi-if').append('<li><a href='+ref+' class="menulink">'+strategylist[key].strategyname+'</a></li>');
                          else
                                $('#mi-wl').append('<li><a href='+ref+' class="menulink">'+strategylist[key].strategyname+'</a></li>');
                      } // end of adding strategy list in the menu

                
    $("#mi-rs").flexigrid({
            url: 'orderhandle?action='+Constants.Order.ALL_ORDER_LIST,
            dataType: 'json',
            preProcess: formatOrderFeed,
            colModel : [
                    {display: 'Strategy', name : 'strategyid', width : 100, sortable : true, align: 'right'},
                    {display: 'Date', name : 'initiatetime', width : 60, sortable : true, align: 'right'},
                    {display: 'Symbol', name : 'symbol', width : 60, sortable : true, align: 'right'},
                    {display: 'Quantity', name : 'quantity', width : 40, sortable : false, align: 'right'},
                    {display: 'Order<br>Price', name : 'pricetype', width : 50, sortable : false, align: 'right'},

                    {display: 'B/S', name : 'opentype', width : 15, sortable : false, align: 'center'},
                    {display: 'Term', name : 'term', width : 25, sortable : false, align: 'right'},
                    {display: 'Status', name : 'quantity', width : 60, sortable : true, align: 'right'},
                    {display: 'Execution<br>Price', name : 'executionprice', width : 60, sortable : false, align: 'right'},
                    {display: 'Execution<br>Time', name : 'executiontime', width : 60, sortable : false, align: 'right'},
                    {display: 'Action', name : 'action', width : 1, sortable : false, align: 'center', hide:true},
                    {display: 'Comment', name : 'comment', width : 1, sortable : false, align: 'center', hide:true}

                    ],
            searchitems : [
                    {display: 'Symbol', name : 'symbol', isdefault: true}
                    ],
            sortname: "initiatetime",
            sortorder: "desc",
            usepager: true,
            //title: 'Recent Order Signals',
            useRp: true,
            rp: 15,
            showTableToggleBtn: true,
            width: '670',
            height : 'auto',
            nowrap: false
    });

    function formatOrderFeed(data){
                 if(data.status == 'success') {  
                     for(var i=0;i<data.rows.length;i++){
                        data.rows[i].cell[0] = '<a href="/#!/strategy/'+data.rows[i].cell[0]+'">'+strategylist[data.rows[i].cell[0]].strategyname;
                        data.rows[i].cell[1] = dateFormatter(data.rows[i].cell[1]);
                        data.rows[i].cell[2] = data.rows[i].cell[2] + '<br/>'+'@'+Constants.Exchange.EXCHANGE_CODE[data.rows[i].cell[10]];
                        data.rows[i].cell[4] =  Constants.Order.PRICETYPE_CODE[data.rows[i].cell[11]] + '<br/>'+'@'+data.rows[i].cell[4] ;
                        data.rows[i].cell[5] = Constants.Order.ORDER_CODE[data.rows[i].cell[5]];
                        data.rows[i].cell[6] = Constants.Order.TERM_CODE[data.rows[i].cell[6]];
                        var status = data.rows[i].cell[7];
                        data.rows[i].cell[7] = "<a href=\"javaScript:void(0)\" "
                                + "onclick=\"javaScript:showComment(\'"+ data.rows[i].cell[12] +"\')\">"
                                +Constants.Order.ORDER_STATUS_CODE[data.rows[i].cell[7]]+"</a>";
                        if(status != Constants.Order.ORDER_EXECUTED){
                            data.rows[i].cell[8] = "N/A";
                            data.rows[i].cell[9] = "N/A";
                        }else
                            data.rows[i].cell[9] = dateFormatter(data.rows[i].cell[9]);
                            
                        
                     }
                     if(data.rows.length <=0)
                         $('#t2-orderfeed-msg').html(" (No order feed yet. Start following stratigies.)");
                     return data;
                 }else{
                   if(data.errorCode == Constants.ExceptionCode.UNAUTHENTICATED_USER_ERROR)
                       userSignout("timeout");
                   addCommonMessage(data.message); 
                 }
        }


    //$('input.star').rating();
   // $('input.star').rating();
    
    

});
    </script>